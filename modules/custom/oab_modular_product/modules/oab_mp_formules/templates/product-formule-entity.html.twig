{#
/**
 * @file product_formule_entity.html.twig
 * Default theme implementation to present Product formule entity data.
 *
 * This template is used when viewing Product formule entity pages.
 *
 *
 * Available variables:
 * - content: A list of content items. Use 'content' to print all content, or
 * - attributes: HTML attributes for the container element.
 *
 * @see template_preprocess_product_formule_entity()
 *
 * @ingroup themeable
 */
#}


{% set nb_questions = formule_fields|length %}
{% set modal_id = "modal-formule-" ~ product_formule_entity.id() %}

<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#{{ modal_id }}">
  {{ "Choose this formule"|t }}
</button>


<div class="modal fade modal-product-formule" id="{{ modal_id }}"
     data-formule="{{ product_formule_entity.id() }}"
     data-formule-name="{{ product_formule_entity.label() }}"
     data-formule-price="{{ product_formule_entity.field_price[0].value }}"
>
  <div class="modal-dialog">
    <div class="modal-content d-flex" data-show="reception">
      <div class="header-logo">
        <a href="{{ path('<front>') }}" title="{{ 'Home'|t }}" rel="home">
          <img class="site-logo d-none d-md-block" src="/{{ base_path ~ directory }}/orange_business_master_logo_text_black.svg" alt="{{ 'Home'|t }}" />
          <img class="site-logo logo-mobile-one-i d-md-none float-right mr-1"
               src="/{{ base_path ~ directory }}/orange_business_small_logo_text_black.svg" alt="{{ 'Home'|t }}" />
        </a>
      </div>

      <div class="header-btn-close">
          <button type="button" class="close d-none d-md-block" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true" class="close-cross">x</span>
            <span class="button-text"> {{ 'Fermer'|t }} </span>
          </button>
          <button type="button" class="close d-md-none o-link-arrow o-link-small back" data-dismiss="modal">{{ 'Fermer'|t }}</button>
        </div>

      <div class="left-zone">
        <div class="content">
          <p class="d-none d-md-block product-label"><strong>{{ node_label }}</strong></p>
          <p class="d-none d-md-block formule-label lead"><strong>{{ product_formule_entity.getName() }}</strong></p>
          <p class="d-md-none product-formule-label"><strong>{{ node_label }}</strong> &bull; <strong>{{ product_formule_entity.getName() }}</strong></p>
          <div data-step="reception">
            <span class="h1">
            Vérifions votre éligibilité à la pré-commande
          </span>
            <p class="accroche lead">Afin de vérifier votre éligibilité à la pré-commande en ligne et de nous permettre de configurer votre
              formule,
              répondez aux {{ nb_questions }} questions suivantes.
            </p>

            <button class="btn btn-primary btn-begin">Commencer</button>
          </div>
          <div class="progressbar d-none" data-label="Question {num_question}/{{ nb_questions }}">
            <progress max="{{ nb_questions + 1}}" value="1"></progress>
            <div class="progressbar-label">Question 1/{{ nb_questions }}</div>
          </div>
          <div class="d-none d-md-block">
            <div class="result-stack d-none">
              <div class="result-items">

              </div>
            </div>
          </div>
          <div class="d-md-none">
            {% set stack_list_btn_id = "stack-list-collapsed-btn-" ~ product_formule_entity.id() %}
            {% set stack_list_id = "stack-list-collapsed-" ~ product_formule_entity.id() %}
            <div class="result-stack stack-mobile d-none">
              <button id="{{ stack_list_btn_id }}"
                      type="button"
                      class="o-link-arrow down collapsed py-1"
                      data-toggle="collapse"
                      data-target="#{{ stack_list_id }}"
                      aria-expanded="false"
                      aria-controls="{{ stack_list_id }}"
              >
                Modifier mes réponses</button>
              <div id="{{ stack_list_id }}" class=" collapse" role="region" aria-labelledby="{{ stack_list_btn_id }}">
                <div class="result-items">

                </div>
              </div>
            </div>
          </div>

        </div>

      </div>
      <div class="right-zone">
        <div data-step="reception">
          <div class="illustration">
            {% set illustration = {
              '#theme':'image',
              '#uri': field_illustration_uri,
              '#alt': field_illustration_alt,
            } %}
            {{ illustration }}
          </div>
        </div>
        {% for formule_field in formule_fields %}
          <div class="{% if loop.index != 1 %}d-none{% endif %}" data-step="process">
            {{ formule_field }}
          </div>
        {% endfor %}
        <div data-step="contact-form">
          <div class="row d-flex">
            <div class="col-12 col-md-6">
              <div class="pb-1 pb-md-3"><span class="h3" data-field="no-result-title"></span></div>
              <div class="pb-3 pb-md-2"><span data-field="no-result-sentence"></span></div>
              <a class="btn btn-primary mb-3" data-field="no-result-link"></a>
            </div>
            <div class="col-7 col-md-6 offset-3 offset-md-0 px-0">
              <img class="" src="/themes/theme_one_i/assets/image/illustration-contact-orange.png" alt="illustration contact">
            </div>
          </div>
        </div>
        <div data-step="result"></div>
      </div>
    </div>
  </div>
</div>
